<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Brandico Inicio</title>
		<!-- Importar Bulma CSS-->
		<link
		rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.2/css/bulma.min.css">
		<!-- Importar los iconos -->
        <script>
            let ruta_crear_publicacion = "{{path('crear_publicacion')}}";
            let ruta_crear_comentario = "{{path('crear_comentario')}}";
			let ruta_devolver_publicaciones = "{{path('devolver_publicaciones')}}";
			let ruta_dar_like = "{{path('dar_like')}}";
			let ruta_borrar_post = "{{path('borrar_post')}}";
			let ruta_borrar_comentario = "{{path('borrar_comentario')}}";
			let ruta_quitar_like = "{{path('quitar_like')}}";
			let es_admin = "{{app.user.getRol()}}";
			let correo = "{{app.user.getCorreo()}}";
        </script>
		<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
		<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

		<!-- Importar Alpine.js -->
		<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
		<script src="{{asset('js/jquery.js')}}" defer></script>
		<script src="{{asset('js/inicio.js')}}" defer></script>
		<link rel="icon" href="{{ asset('img/logoHeader.png') }}">
		<link rel="stylesheet" href="{{ asset('css/inicio.css') }}">
	</head>
	<body>
		<!-- Header -->
		<header class="hero is-primary is-small">
			<div class="hero-body">
				<div class="container">
					<div class="is-flex is-align-items-center is-justify-content-flex-start">
						<figure class="image is-64x64">
							<img src="{{ asset('img/BrandicoLogo2White.png') }}" alt="icono BRANDICO">
						</figure>
						<div style="white-space: nowrap; align-self: center">
							<h1 class="title">BRANDICO</h1>
						</div>
					</div>
					<div class="is-flex is-align-items-center is-justify-content-flex-start">
						<a href="{{ path('controlador_logout') }}" class="logout">
							<span class="logout-label">Logout</span>
							<ion-icon name="log-out-outline"></ion-icon>
						</a>
					</div>
				</div>
			</div>
		</header>

		<section
			class="columns is-gapless">
			<!-- Navigation -->
			<div class="is-fixed-width">
				<div class="card">
					<div class="card-content">
						<nav class="navbar is-flex is-flex-direction-column" role="navigation" aria-label="main navigation">
							<a class="navbar-item focus" href="{{ path('controlador_portal_inicio') }}">
								<div class="navbar-item-content">
									<ion-icon name="home-outline"></ion-icon>
									<span class="navbar-item-text">Inicio</span>
								</div>
							</a>
							<a class="navbar-item" href="{{ path('explorar') }}">
								<div class="navbar-item-content">
									<ion-icon name="search-outline"></ion-icon>
									<span class="navbar-item-text">Explorar</span>
								</div>
							</a>
							<a class="navbar-item" href="{{ path('miperfil') }}">
								<div class="navbar-item-content">
									<ion-icon name="person-outline"></ion-icon>
									<span class="navbar-item-text">Perfil</span>
								</div>
							</a>
							{% if is_granted('ROLE_ADMIN') %}
								<a class="navbar-item" href="{{ path('controlador_portal_admin') }}">
									<div class="navbar-item-content">
										<ion-icon name="settings-outline"></ion-icon>
										<span class="navbar-item-text">Zona Admin</span>
									</div>
								</a>
							{% endif %}
						</nav>
					</div>
				</div>
			</div>
			<!-- Secciones Publicar y post -->
			<div id='principal'
				class="column">
				<!-- Publish Box -->
				<section class="section">
					<div class="container">
						<div class="card">
							<div class="card-content">
								<div class="content">
									<form id='formulario-publicar' method='POST'>
										<div class="field"  x-data="{ fileName: ''}">
											<label class="label">Publicar un mensaje:</label>
											<div class="control">
												<textarea class="textarea" maxlength="280" name='contenido-formulario' placeholder="Escribe aquí tu mensaje (máximo 280 caracteres)"></textarea>
											</div>
											<label class="label">Adjuntar imagen o video:</label>
											<!-- Alpine.js maneja la subida del archivo -->
											<div class="file">
												<label for="fileInput" class="file-label">
													<input id="fileInput" class="file-input" accept="image/*, video/*" type="file" name="fichero-formulario" @change="fileName = $event.target.files[0].name">
													<span class="file-cta">
														<span class="file-icon">
															<ion-icon name="cloud-upload-outline"></ion-icon>
														</span>
														<span class="file-label">
															Seleccionar archivo
														</span>
													</span>
													<!-- Con Alpine se muestra el nombre del archivo -->
													<span x-show="fileName == ''">No se ha seleccionado ningún archivo</span>
													<span x-show="fileName != ''" class="file-name" x-text="fileName"></span>
												</label>
											</div>
											<div class="buttons publish">
												<button @click="fileName = ''" type='button' id='publicar-mensaje' class="button is-link is-info">Publicar</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</section>

				
			</div>

			<button class="scroll-to-top" title="Volver arriba">
				<span class="icon">
					<ion-icon name="arrow-up-outline"></ion-icon>
				</span>
			</button>
		</section>
		<script>
			// Para el botón para subir arriba
document.addEventListener('DOMContentLoaded', function () {
var scrollBtn = document.querySelector('.scroll-to-top');

window.addEventListener('scroll', function () {
if (window.pageYOffset > 300) {
scrollBtn.classList.add('show');
} else {
scrollBtn.classList.remove('show');
}
});

scrollBtn.addEventListener('click', function (e) {
e.preventDefault();
window.scrollTo({top: 0, behavior: 'smooth'});
});
});
		</script>
	</body>
</html>
